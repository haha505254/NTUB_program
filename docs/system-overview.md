# 智慧醫院掛號系統操作說明（白話版）

這是一套「網路掛號＋現場作業＋診間控管」的整合系統。所有使用者都透過同一個網站登入，只是依照帳號角色進到不同的儀表板。下面用生活化的方式說明各角色可以做什麼、要怎麼用。

---

## 共通觀念
- **登入網址**：首頁（`/`）會顯示四個角色入口，也可以直接登入再按「切換角色」跳轉。
- **帳號角色**：
  - 病患（patient）
  - 櫃檯人員（staff）
  - 醫師（doctor）
  - 系統管理員（admin）
- **訊息提示**：所有操作成功或失敗，頁面上方都會跳出提示框，不需要找 log。
- **沒權限？** 如果點到沒有權限的頁面會看到美化過的 403 卡片，按鈕可以帶你回首頁或切換身份。

---

## 病患：線上掛號與個人服務
1. **註冊新帳號**  
   - 打開「註冊」頁面，填寫身分證號（之後當作帳號）、姓名、生日、手機。  
   - 系統會自動建立病歷號並幫你登入。
2. **病患儀表板（`/patients/dashboard/`）**  
   - 第一頁顯示最近的預約、常用功能捷徑。
3. **查詢門診（`/patients/schedules/`）**  
   - 用日期＋科別篩選，看到可預約的門診。  
   - 會展示剩餘名額、狀態標籤，按「預約」進入詳情。
4. **預約掛號**  
   - 若本人看診直接送出；也可以選家屬（先在家屬管理新增）。  
   - 預約成功會顯示號碼並寫入事件紀錄。
5. **掛號紀錄（`我的掛號`）**  
   - 一次看到所有歷史＋未來的掛號，可取消或查看看診進度。
6. **看診進度**  
   - 顯示目前叫到哪一號、報到／等待人數、最近的診間事件。
7. **家屬管理**  
   - 可新增／編輯／刪除家屬資料，後續預約直接選擇。  
   - 系統會要求填寫家屬的身分證/護照、生日與聯絡電話，缺少資料就無法代為掛號。
8. **個人資料與密碼**  
   - 在帳號設定頁更新姓名、電話、地址；密碼可透過「變更密碼」頁面修改。

---

## 櫃檯人員：病歷建檔＋現場掛號
1. **登入後進入櫃檯儀表板（`/registrations/staff/dashboard/`）**  
   - 預設停在「病患查詢」分頁，可用病歷號或身分證號搜尋。  
   - 上方的頁籤可切換到「新增病患」。
2. **新增病患**  
   - 填寫基本資料與預設密碼，送出後系統會產生病歷號並跳回查詢分頁。
3. **查到病患後的操作**  
   - **病患資料**：更新姓名、聯絡方式等。  
   - **現場掛號**：挑選可掛號的門診，設定本人／家屬。  
   - **掛號紀錄**：直接在列表報到或取消掛號。
4. **報到／取消快捷**  
   - 報到按鈕會把狀態改成「已報到」並寫入事件；取消則改為「取消」。
5. **門診狀態看板（`/registrations/clinic-status/`）**  
   - 選擇日期＋科別，可查看各門診的報到、等待、完成人數，以及目前叫到哪一號。

---

## 醫師／診間人員：掌握當日掛號與叫號
1. **診間儀表板（`/registrations/doctor/dashboard/`）**  
   - 上方先選日期；門診列表會列出自己的門診時段與掛號統計。  
   - 點某個門診可以看到完整詳情。
2. **門診詳細頁包含**  
   - **叫號面板**：按「叫下一位」會把最早報到的患者改成「看診中」。  
   - **看診中**：顯示目前排在診間的病患，按「標記完成」結束看診。  
   - **門診狀態**：可切換暫停、恢復、結束；結束會自動處理未看診的掛號。
3. **候診名單**  
   - 「已報到」與「未報到」分開顯示，方便掌握現場狀況。
4. **歷史紀錄＋事件紀錄**  
   - 看過的人、完成時間，以及系統紀錄的所有事件（報到、叫號、取消…）。

---

## 系統管理員：維護資料與報表
1. **管理後台（`/administration/dashboard/`）**  
   - 左側選單包含公告、醫師、班表、科別、統計報表等。
2. **公告管理**  
   - 新增／編輯／上下架公告；可設定發佈與結束時間。
3. **科別、醫師管理**  
   - 科別：維護代碼、名稱、介紹與啟用狀態。  
   - 醫師：建立帳號、指定科別、證書號，並可啟用／停用。
4. **班表管理**  
   - 設定日期、時段、診間、名額與狀態；支援狀態批次調整與刪除（未掛號可刪）。
5. **掛號報表**  
   - 依日期區間、科別、醫師產生統計，頁面直接顯示，也能匯出 CSV。

---

## 其他補充
- **科別公開頁**：`/clinics/departments/` 列出所有啟用的科別與簡介。  
- **403 頁面**：若誤闖沒有權限的頁面，會看到友善提示＋快速返回按鈕。  
- **資料模型**：全部集中在 `patients/models.py`、`registrations/models.py`、`clinics/models.py`、`administration/models.py`，若要擴充功能建議從這裡出發。  
- **進度追蹤**：`PROGRESS.md` 列出 34 項需求（A1–E34）的完成狀態；`NEXT_STEPS.md` 提供後續開發提案與常用指令。

---

## 推薦操作流程（QA 或 Demo）
1. 以病患身分註冊 → 查門診 → 預約 → 查看掛號紀錄與看診進度。  
2. 以櫃檯帳號登入 → 建立新病患 → 現場掛號 → 報到 → 查看診間狀態。  
3. 以醫師帳號登入 → 選擇今日門診 → 叫號、標記完成、暫停／結束門診。  
4. 以管理員登入 → 新增公告、建立班表、匯出掛號報表。  

依照這份說明，就能快速熟悉整個智慧醫院掛號系統的功能與操作方式。祝上線順利！
